
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>filters.sample &mdash; pdal.io</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/pdal.css" type="text/css" />
      <link rel="stylesheet" href="../_static/breathe.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://pdal.io/stages/filters.sample.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="filters.dem" href="filters.dem.html" />
    <link rel="prev" title="filters.relaxationdartthrowing" href="filters.relaxationdartthrowing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
          </a>
              <div class="version">
                2.6.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apps/index.html">Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pipeline.html">Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="stages.html">Stages</a></li>
<li class="toctree-l1"><a class="reference internal" href="readers.html">Readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="writers.html">Writers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="filters.html">Filters</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="filters.html#create">Create</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#order">Order</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#move">Move</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="filters.html#cull">Cull</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="filters.html#spatial">Spatial</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="filters.html#resampling">Resampling</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="filters.decimation.html">filters.decimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.fps.html">filters.fps</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.relaxationdartthrowing.html">filters.relaxationdartthrowing</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">filters.sample</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="filters.html#conditional">Conditional</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.html#voxel">Voxel</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.html#position">Position</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#new">New</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#join">Join</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#metadata">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#mesh">Mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#languages">Languages</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#other">Other</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dimensions.html">Dimensions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../types.html">Types</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../java.html">Java</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workshop/index.html">Workshop</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/index.html">Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html"> Documentation </a> &raquo;</li>
      
          <li><a href="filters.html">Filters</a> &raquo;</li>
      
      <li>filters.sample</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/PDAL/PDAL/edit//master/doc/stages/filters.sample.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="filters.dem.html" class="btn btn-neutral float-right" title="filters.dem" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="filters.relaxationdartthrowing.html" class="btn btn-neutral float-left" title="filters.relaxationdartthrowing" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="filters-sample">
<span id="id1"></span><h1>filters.sample<a class="headerlink" href="#filters-sample" title="Permalink to this heading"></a></h1>
<p>The <strong>Sample Filter</strong> performs Poisson sampling of the input <code class="docutils literal notranslate"><span class="pre">PointView</span></code>. The
practice of performing Poisson sampling via “Dart Throwing” was introduced
in the mid-1980’s by <a class="reference internal" href="../references.html#cook1986" id="id2"><span>[Cook1986]</span></a> and <a class="reference internal" href="../references.html#dippe1985" id="id3"><span>[Dippe1985]</span></a>, and has been applied to
point clouds in other software <a class="reference internal" href="../references.html#mesh2009" id="id4"><span>[Mesh2009]</span></a>.</p>
<p>Our implementation of Poisson sampling is made streamable by voxelizing the
space and only adding points to the output <code class="docutils literal notranslate"><span class="pre">PointView</span></code> if they do not violate
the minimum distance criterion (as specified by <code class="docutils literal notranslate"><span class="pre">radius</span></code>). The voxelization
allows several optimizations, first by checking for existing points within the
same voxel as the point under consideration, which are mostly likely to
violate the minimum distance criterion. Furthermore, we can easily visit
neighboring voxels (limiting the search to those that are populated) without
the need to create a KD-tree from the entire input <code class="docutils literal notranslate"><span class="pre">PointView</span></code> first and
performing costly spatial searches.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="filters.decimation.html#filters-decimation"><span class="std std-ref">filters.decimation</span></a>, <a class="reference internal" href="filters.fps.html#filters-fps"><span class="std std-ref">filters.fps</span></a>,
<a class="reference internal" href="filters.relaxationdartthrowing.html#filters-relaxationdartthrowing"><span class="std std-ref">filters.relaxationdartthrowing</span></a>,
<a class="reference internal" href="filters.voxelcenternearestneighbor.html#filters-voxelcenternearestneighbor"><span class="std std-ref">filters.voxelcenternearestneighbor</span></a>,
<a class="reference internal" href="filters.voxelcentroidnearestneighbor.html#filters-voxelcentroidnearestneighbor"><span class="std std-ref">filters.voxelcentroidnearestneighbor</span></a>, and <a class="reference internal" href="filters.voxeldownsize.html#filters-voxeldownsize"><span class="std std-ref">filters.voxeldownsize</span></a> also
perform decimation.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Starting with PDAL v2.3, the <code class="docutils literal notranslate"><span class="pre">filters.sample</span></code> now supports streaming
mode. As a result, there is no longer an option to <code class="docutils literal notranslate"><span class="pre">shuffle</span></code> points (or
to provide a <code class="docutils literal notranslate"><span class="pre">seed</span></code> for the shuffle).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Starting with PDAL v2.3, a <code class="docutils literal notranslate"><span class="pre">cell</span></code> option has been added that works with
the existing <code class="docutils literal notranslate"><span class="pre">radius</span></code>. The user must provide one or the other, but not
both. The provided option will be used to automatically compute the other.
The relationship between <code class="docutils literal notranslate"><span class="pre">cell</span></code> and <code class="docutils literal notranslate"><span class="pre">radius</span></code> is such that the
<code class="docutils literal notranslate"><span class="pre">radius</span></code> defines the radius of a sphere that circumscribes a voxel with
edge length defined by <code class="docutils literal notranslate"><span class="pre">cell</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Care must be taken with selection of the <code class="docutils literal notranslate"><span class="pre">cell</span></code>/<code class="docutils literal notranslate"><span class="pre">radius</span></code> option.
Although the filter can now operate in streaming mode, if the extents of
the point cloud are large (or conversely, if the cell size is small) the
voxel occupancy map which grows as a function of these variables can still
require a large memory footprint.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To operate in streaming mode, the filter will typically retain the first
point to occupy a voxel (subject to the minimum distance criterion set
forth earlier). This means that point ordering matters, and in fact, it is
quite possible that points in the incoming stream can be ordered in such a
way as to introduce undesirable artifacts (e.g., related to previous tiling
of the data). In our experience, processing data that is still in scan
order (ordered by GpsTime, if available) does produce reliable results,
although to require this sort either internally or by inserting
<a class="reference internal" href="filters.sort.html#filters-sort"><span class="std std-ref">filters.sort</span></a> prior to sampling would break our ability to stream the
data.</p>
</div>
<div class="admonition embed" id="embed-0">
<p class="admonition-title">Default Embedded Stage </p>
<p>This stage is enabled by default</p>
</div>
<div class="admonition streamable" id="streamable-0">
<p class="admonition-title">Streamable Stage</p>
<p>This stage supports streaming operations</p>
</div>
<section id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this heading"></a></h2>
<dl class="simple">
<dt>cell</dt><dd><p>Voxel cell size. If <code class="docutils literal notranslate"><span class="pre">radius</span></code> is set, <code class="docutils literal notranslate"><span class="pre">cell</span></code> is automatically computed
such that the cell is circumscribed by the sphere defined by <code class="docutils literal notranslate"><span class="pre">radius</span></code>.</p>
</dd>
<dt>radius</dt><dd><p>Minimum distance between samples. If <code class="docutils literal notranslate"><span class="pre">cell</span></code> is set, <code class="docutils literal notranslate"><span class="pre">radius</span></code> is
automatically computed to defined a sphere that circumscribes the voxel cell.
Whether specified or derived, <code class="docutils literal notranslate"><span class="pre">radius</span></code> defines the minimum allowable
distance between points.</p>
</dd>
</dl>
<dl class="simple">
<dt>where</dt><dd><p>An <a class="reference internal" href="expression.html#pdal-expression"><span class="std std-ref">expression</span></a> that limits points passed to a filter.
Points that don’t pass the
expression skip the stage but are available to subsequent stages in a pipeline.
[Default: no filtering]</p>
</dd>
<dt>where_merge</dt><dd><p>A strategy for merging points skipped by a ‘<cite>where’</cite> option when running in standard mode.
If <code class="docutils literal notranslate"><span class="pre">true</span></code>, the skipped points are added to the first point view returned by the skipped
filter. If <code class="docutils literal notranslate"><span class="pre">false</span></code>, skipped points are placed in their own point view. If <code class="docutils literal notranslate"><span class="pre">auto</span></code>,
skipped points are merged into the returned point view provided that only one point view
is returned and it has the same point count as it did when the filter was run.
[Default: <code class="docutils literal notranslate"><span class="pre">auto</span></code>]</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="filters.dem.html" class="btn btn-neutral float-right" title="filters.dem" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="filters.relaxationdartthrowing.html" class="btn btn-neutral float-left" title="filters.relaxationdartthrowing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://hobu.co">
        <div class="hobu-logo"></div>
      </a>
      <div class="copyright">
      

                    &copy;  2023
                        <a href="https://github.com/abellgithub">Andrew Bell</a>,
                        <a href="https://github.com/chambbj">Brad Chambers</a>,
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>.

      
      Last updated on May 22, 2023.
      </div>
    </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <div class="footer">
        <div class="container">
                    &copy;  2023
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>,
                Last updated
                    on May 22, 2023.
        </div>
    </div>

</body>
</html>