
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>filters.outlier &mdash; pdal.io</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/pdal.css" type="text/css" />
      <link rel="stylesheet" href="../_static/breathe.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://pdal.io/stages/filters.outlier.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="filters.neighborclassifier" href="filters.neighborclassifier.html" />
    <link rel="prev" title="filters.elm" href="filters.elm.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
          </a>
              <div class="version">
                2.6.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apps/index.html">Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pipeline.html">Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="stages.html">Stages</a></li>
<li class="toctree-l1"><a class="reference internal" href="readers.html">Readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="writers.html">Writers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="filters.html">Filters</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="filters.html#create">Create</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="filters.html#classification">Classification</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="filters.html#ground-unclassified">Ground/Unclassified</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="filters.html#noise">Noise</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.html#consensus">Consensus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="filters.html#height-above-ground">Height Above Ground</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.html#colorization">Colorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.html#clustering">Clustering</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.html#pointwise-features">Pointwise Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.html#assignment">Assignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.html#dimension-create-copy">Dimension Create/Copy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#order">Order</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#move">Move</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#cull">Cull</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#new">New</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#join">Join</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#metadata">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#mesh">Mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#languages">Languages</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#other">Other</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dimensions.html">Dimensions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../types.html">Types</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../java.html">Java</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workshop/index.html">Workshop</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/index.html">Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html"> Documentation </a> &raquo;</li>
      
          <li><a href="filters.html">Filters</a> &raquo;</li>
      
      <li>filters.outlier</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/PDAL/PDAL/edit//master/doc/stages/filters.outlier.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="filters.neighborclassifier.html" class="btn btn-neutral float-right" title="filters.neighborclassifier" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="filters.elm.html" class="btn btn-neutral float-left" title="filters.elm" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="filters-outlier">
<span id="id1"></span><h1>filters.outlier<a class="headerlink" href="#filters-outlier" title="Permalink to this heading"></a></h1>
<p>The <strong>outlier filter</strong> provides two outlier filtering methods: radius and
statistical. These two approaches are discussed in further detail below.</p>
<p>It is worth noting that both filtering methods simply apply a classification
value of 7 to the noise points (per the <a class="reference external" href="http://www.asprs.org/a/society/committees/standards/LAS_1_4_r13.pdf">LAS specification</a>).
To remove the noise
points altogether, users can add a <a class="reference internal" href="filters.range.html#filters-range"><span class="std std-ref">range filter</span></a> to their
pipeline, downstream from the outlier filter.</p>
<div class="admonition embed" id="embed-0">
<p class="admonition-title">Default Embedded Stage </p>
<p>This stage is enabled by default</p>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;filters.range&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;limits&quot;</span><span class="p">:</span><span class="s2">&quot;Classification![7:7]&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<section id="statistical-method">
<h2>Statistical Method<a class="headerlink" href="#statistical-method" title="Permalink to this heading"></a></h2>
<p>The default method for identifying outlier points is the statistical outlier method. This method requires two passes through the input <code class="docutils literal notranslate"><span class="pre">PointView</span></code>, first to compute a threshold value based on global statistics, and second to identify outliers using the computed threshold.</p>
<p>In the first pass, for each point <span class="math notranslate nohighlight">\(p_i\)</span> in the input <code class="docutils literal notranslate"><span class="pre">PointView</span></code>, compute the mean distance <span class="math notranslate nohighlight">\(\mu_i\)</span> to each of the <span class="math notranslate nohighlight">\(k\)</span> nearest neighbors (where <span class="math notranslate nohighlight">\(k\)</span> is configurable and specified by <a class="reference internal" href="#mean-k">mean_k</a>). Then,</p>
<div class="math notranslate nohighlight">
\[\overline{\mu} = \frac{1}{N} \sum_{i=1}^N \mu_i\]</div>
<div class="math notranslate nohighlight">
\[\sigma = \sqrt{\frac{1}{N-1} \sum_{i=1}^N (\mu_i - \overline{\mu})^2}\]</div>
<p>A global mean <span class="math notranslate nohighlight">\(\overline{\mu}\)</span> of these mean distances is then computed along with the standard deviation <span class="math notranslate nohighlight">\(\sigma\)</span>. From this, the threshold is computed as</p>
<div class="math notranslate nohighlight">
\[t = \mu + m\sigma\]</div>
<p>where <span class="math notranslate nohighlight">\(m\)</span> is a user-defined multiplier specified by <a class="reference internal" href="#multiplier">multiplier</a>.</p>
<p>We now iterate over the pre-computed mean distances <span class="math notranslate nohighlight">\(\mu_i\)</span> and compare to computed threshold value. If <span class="math notranslate nohighlight">\(\mu_i\)</span> is greater than the threshold, it is marked as an outlier.</p>
<div class="math notranslate nohighlight">
\[\begin{split}outlier_i = \begin{cases}
    \text{true,} \phantom{false,} \text{if } \mu_i &gt;= t \\
    \text{false,} \phantom{true,} \text{otherwise} \\
\end{cases}\end{split}\]</div>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/filters.statisticaloutlier.img1.png"><img alt="Points before outlier removal" src="../_images/filters.statisticaloutlier.img1.png" style="width: 641.1999999999999px; height: 711.1999999999999px;" /></a>
</figure>
<p>Before outlier removal, noise points can be found both above and below the
scene.</p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/filters.statisticaloutlier.img2.png"><img alt="Points after outlier removal" src="../_images/filters.statisticaloutlier.img2.png" style="width: 640.8px; height: 525.6px;" /></a>
</figure>
<p>After outlier removal, the noise points are removed.</p>
<p>See <a class="reference internal" href="../references.html#rusu2008" id="id2"><span>[Rusu2008]</span></a> for more information.</p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this heading"></a></h3>
<p>In this example, points are marked as outliers if the average distance to each
of the 12 nearest neighbors is below the computed threshold.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;input.las&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;filters.outlier&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="s2">&quot;statistical&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;mean_k&quot;</span><span class="p">:</span><span class="mi">12</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;multiplier&quot;</span><span class="p">:</span><span class="mf">2.2</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;output.las&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="radius-method">
<h2>Radius Method<a class="headerlink" href="#radius-method" title="Permalink to this heading"></a></h2>
<p>For each point <span class="math notranslate nohighlight">\(p_i\)</span> in the input <code class="docutils literal notranslate"><span class="pre">PointView</span></code>, this method counts the
number of neighboring points <span class="math notranslate nohighlight">\(k_i\)</span> within radius <span class="math notranslate nohighlight">\(r\)</span> (specified by
<a class="reference internal" href="#radius">radius</a>). If <span class="math notranslate nohighlight">\(k_i&lt;k_{min}\)</span>, where <span class="math notranslate nohighlight">\(k_{min}\)</span> is the minimum number
of neighbors specified by <a class="reference internal" href="#min-k">min_k</a>, it is marked as an outlier.</p>
<div class="math notranslate nohighlight">
\[\begin{split}outlier_i = \begin{cases}
    \text{true,} \phantom{false,} \text{if } k_i &lt; k_{min} \\
    \text{false,} \phantom{true,} \text{otherwise} \\
\end{cases}\end{split}\]</div>
<section id="id3">
<h3>Example<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<p>The following example will mark points as outliers when there are fewer than
four neighbors within a radius of 1.0.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;input.las&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;filters.outlier&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="s2">&quot;radius&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;radius&quot;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;min_k&quot;</span><span class="p">:</span><span class="mi">4</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;output.las&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this heading"></a></h2>
<dl class="simple">
<dt>class</dt><dd><p>The classification value to apply to outliers. [Default: 7]</p>
</dd>
<dt>method</dt><dd><p>The outlier removal method (either “statistical” or “radius”).
[Default: “statistical”]</p>
</dd>
<dt><span class="target" id="min-k">min_k</span></dt><dd><p>Minimum number of neighbors in radius (radius method only). [Default: 2]</p>
</dd>
<dt><span class="target" id="radius">radius</span></dt><dd><p>Radius (radius method only). [Default: 1.0]</p>
</dd>
<dt><span class="target" id="mean-k">mean_k</span></dt><dd><p>Mean number of neighbors (statistical method only). [Default: 8]</p>
</dd>
<dt><span class="target" id="multiplier">multiplier</span></dt><dd><p>Standard deviation threshold (statistical method only). [Default: 2.0]</p>
</dd>
</dl>
<dl class="simple">
<dt>where</dt><dd><p>An <a class="reference internal" href="expression.html#pdal-expression"><span class="std std-ref">expression</span></a> that limits points passed to a filter.
Points that don’t pass the
expression skip the stage but are available to subsequent stages in a pipeline.
[Default: no filtering]</p>
</dd>
<dt>where_merge</dt><dd><p>A strategy for merging points skipped by a ‘<cite>where’</cite> option when running in standard mode.
If <code class="docutils literal notranslate"><span class="pre">true</span></code>, the skipped points are added to the first point view returned by the skipped
filter. If <code class="docutils literal notranslate"><span class="pre">false</span></code>, skipped points are placed in their own point view. If <code class="docutils literal notranslate"><span class="pre">auto</span></code>,
skipped points are merged into the returned point view provided that only one point view
is returned and it has the same point count as it did when the filter was run.
[Default: <code class="docutils literal notranslate"><span class="pre">auto</span></code>]</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="filters.neighborclassifier.html" class="btn btn-neutral float-right" title="filters.neighborclassifier" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="filters.elm.html" class="btn btn-neutral float-left" title="filters.elm" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://hobu.co">
        <div class="hobu-logo"></div>
      </a>
      <div class="copyright">
      

                    &copy;  2023
                        <a href="https://github.com/abellgithub">Andrew Bell</a>,
                        <a href="https://github.com/chambbj">Brad Chambers</a>,
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>.

      
      Last updated on May 22, 2023.
      </div>
    </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <div class="footer">
        <div class="container">
                    &copy;  2023
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>,
                Last updated
                    on May 22, 2023.
        </div>
    </div>

</body>
</html>