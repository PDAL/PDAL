
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>filters.transformation &mdash; pdal.io</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/pdal.css" type="text/css" />
      <link rel="stylesheet" href="../_static/breathe.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://pdal.io/stages/filters.transformation.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="filters.crop" href="filters.crop.html" />
    <link rel="prev" title="filters.reprojection" href="filters.reprojection.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
          </a>
              <div class="version">
                2.6.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apps/index.html">Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pipeline.html">Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="stages.html">Stages</a></li>
<li class="toctree-l1"><a class="reference internal" href="readers.html">Readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="writers.html">Writers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="filters.html">Filters</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="filters.html#create">Create</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#order">Order</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="filters.html#move">Move</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="filters.html#registration">Registration</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="filters.html#predefined">Predefined</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="filters.projpipeline.html">filters.projpipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.reprojection.html">filters.reprojection</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">filters.transformation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#cull">Cull</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#new">New</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#join">Join</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#metadata">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#mesh">Mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#languages">Languages</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#other">Other</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dimensions.html">Dimensions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../types.html">Types</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../java.html">Java</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workshop/index.html">Workshop</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/index.html">Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html"> Documentation </a> &raquo;</li>
      
          <li><a href="filters.html">Filters</a> &raquo;</li>
      
      <li>filters.transformation</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/PDAL/PDAL/edit//master/doc/stages/filters.transformation.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="filters.crop.html" class="btn btn-neutral float-right" title="filters.crop" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="filters.reprojection.html" class="btn btn-neutral float-left" title="filters.reprojection" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="filters-transformation">
<span id="id1"></span><h1>filters.transformation<a class="headerlink" href="#filters-transformation" title="Permalink to this heading"></a></h1>
<p>The transformation filter applies an arbitrary homography
transformation, represented as a 4x4 <a class="reference internal" href="#matrix">matrix</a>, to each xyz triplet.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The transformation filter does not apply or consider any spatial
reference information.</p>
</div>
<div class="admonition embed" id="embed-0">
<p class="admonition-title">Default Embedded Stage </p>
<p>This stage is enabled by default</p>
</div>
<div class="admonition streamable" id="streamable-0">
<p class="admonition-title">Streamable Stage</p>
<p>This stage supports streaming operations</p>
</div>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this heading"></a></h2>
<p>This example rotates the points around the z-axis while translating them.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;untransformed.las&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;filters.transformation&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;matrix&quot;</span><span class="p">:</span><span class="s2">&quot;0 -1  0  1  1  0  0  2  0  0  1  3  0  0  0  1&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;writers.las&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="s2">&quot;transformed.las&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this heading"></a></h2>
<dl class="simple">
<dt>invert</dt><dd><p>If set to true, applies the inverse of the provided transformation matrix.
[Default: false]</p>
</dd>
<dt><span class="target" id="matrix">matrix</span></dt><dd><p>A whitespace-delimited transformation matrix.
The matrix is assumed to be presented in row-major order.
Only matrices with sixteen elements are allowed.</p>
</dd>
</dl>
<dl class="simple">
<dt>where</dt><dd><p>An <a class="reference internal" href="expression.html#pdal-expression"><span class="std std-ref">expression</span></a> that limits points passed to a filter.
Points that don’t pass the
expression skip the stage but are available to subsequent stages in a pipeline.
[Default: no filtering]</p>
</dd>
<dt>where_merge</dt><dd><p>A strategy for merging points skipped by a ‘<cite>where’</cite> option when running in standard mode.
If <code class="docutils literal notranslate"><span class="pre">true</span></code>, the skipped points are added to the first point view returned by the skipped
filter. If <code class="docutils literal notranslate"><span class="pre">false</span></code>, skipped points are placed in their own point view. If <code class="docutils literal notranslate"><span class="pre">auto</span></code>,
skipped points are merged into the returned point view provided that only one point view
is returned and it has the same point count as it did when the filter was run.
[Default: <code class="docutils literal notranslate"><span class="pre">auto</span></code>]</p>
</dd>
</dl>
</section>
<section id="further-details">
<h2>Further details<a class="headerlink" href="#further-details" title="Permalink to this heading"></a></h2>
<p>A full tutorial about transformation matrices is beyond the scope of this
documentation. Instead, we will provide a few pointers to introduce core
concepts, especially as pertains to PDAL’s handling of the <code class="docutils literal notranslate"><span class="pre">matrix</span></code> argument.</p>
<p>Transformations in a 3-dimensional coordinate system can be represented
as a homography transformation using homogeneous coordinates. This 4x4
matrix can represent affine transformations describing operations like
translation, rotation, and scaling of coordinates.  In addition it can
represent perspective transformations modeling a pinhole camera.</p>
<p>The transformation filter’s <code class="docutils literal notranslate"><span class="pre">matrix</span></code> argument is a space delimited, 16
element string. This string is simply a row-major representation of the 4x4
matrix (i.e., first four elements correspond to the top row of the
transformation matrix and so on).</p>
<p>In the event that readers are accustomed to an alternate representation of the
transformation matrix, we provide some simple examples in the form of pure
translations, rotations, and scaling, and show the corresponding <code class="docutils literal notranslate"><span class="pre">matrix</span></code>
string.</p>
<section id="translation">
<h3>Translation<a class="headerlink" href="#translation" title="Permalink to this heading"></a></h3>
<p>A pure translation by <span class="math notranslate nohighlight">\(t_x\)</span>, <span class="math notranslate nohighlight">\(t_y\)</span>, and <span class="math notranslate nohighlight">\(t_z\)</span> in the X, Y,
and Z dimensions is represented by the following matrix.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{matrix}
    1 &amp; 0 &amp; 0 &amp; t_x \\
    0 &amp; 1 &amp; 0 &amp; t_y \\
    0 &amp; 0 &amp; 1 &amp; t_z \\
    0 &amp; 0 &amp; 0 &amp; 1
\end{matrix}\end{split}\]</div>
<p>The JSON syntax required for such a translation is written as follows for <span class="math notranslate nohighlight">\(t_x=7\)</span>, <span class="math notranslate nohighlight">\(t_y=8\)</span>, and <span class="math notranslate nohighlight">\(t_z=9\)</span>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;filters.transformation&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;matrix&quot;</span><span class="p">:</span><span class="s2">&quot;1  0  0  7  0  1  0  8  0  0  1  9  0  0  0  1&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="scaling">
<h3>Scaling<a class="headerlink" href="#scaling" title="Permalink to this heading"></a></h3>
<p>Scaling of coordinates is also possible using a transformation matrix. The
matrix shown below will scale the X coordinates by <span class="math notranslate nohighlight">\(s_x\)</span>, the Y
coordinates by <span class="math notranslate nohighlight">\(s_y\)</span>, and Z by <span class="math notranslate nohighlight">\(s_z\)</span>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{matrix}
    s_x &amp;   0 &amp;   0 &amp; 0 \\
      0 &amp; s_y &amp;   0 &amp; 0 \\
      0 &amp;   0 &amp; s_z &amp; 0 \\
      0 &amp;   0 &amp;   0 &amp; 1
\end{matrix}\end{split}\]</div>
<p>We again provide an example JSON snippet to demonstrate the scaling
transformation. In the example, X and Y are not scaled at all (i.e.,
<span class="math notranslate nohighlight">\(s_x=s_y=1\)</span>) and Z is magnified by a factor of 2 (<span class="math notranslate nohighlight">\(s_z=2\)</span>).</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;filters.transformation&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;matrix&quot;</span><span class="p">:</span><span class="s2">&quot;1  0  0  0  0  1  0  0  0  0  2  0  0  0  0  1&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="rotation">
<h3>Rotation<a class="headerlink" href="#rotation" title="Permalink to this heading"></a></h3>
<p>A rotation of coordinates by <span class="math notranslate nohighlight">\(\theta\)</span> radians counter-clockwise about
the z-axis is accomplished with the following matrix.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{matrix}
    \cos{\theta} &amp; -\sin{\theta} &amp; 0 &amp; 0 \\
    \sin{\theta} &amp;  \cos{\theta} &amp; 0 &amp; 0 \\
               0 &amp;             0 &amp; 1 &amp; 0 \\
               0 &amp;             0 &amp; 0 &amp; 1
\end{matrix}\end{split}\]</div>
<p>In JSON, a rotation of 90 degrees (<span class="math notranslate nohighlight">\(\theta=1.57\)</span> radians) takes the form
shown below.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;filters.transformation&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;matrix&quot;</span><span class="p">:</span><span class="s2">&quot;0  0  -1  0  1  0  0  0  0  0  1  0  0  0  0  1&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Similarly, a rotation about the x-axis by <span class="math notranslate nohighlight">\(\theta\)</span> radians is represented
as</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{matrix}
    1 &amp;            0 &amp;             0 &amp; 0 \\
    0 &amp; \cos{\theta} &amp; -\sin{\theta} &amp; 0 \\
    0 &amp; \sin{\theta} &amp;  \cos{\theta} &amp; 0 \\
    0 &amp;            0 &amp;             0 &amp; 1
\end{matrix}\end{split}\]</div>
<p>which takes the following form in JSON for a rotation of 45 degrees (<span class="math notranslate nohighlight">\(\theta=0.785\)</span> radians)</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;filters.transformation&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;matrix&quot;</span><span class="p">:</span><span class="s2">&quot;1  0  0  0  0  0.707  -0.707  0  0  0.707  0.707  0  0  0  0  1&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Finally, a rotation by <span class="math notranslate nohighlight">\(\theta\)</span> radians about the y-axis is accomplished
with the matrix</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{matrix}
     \cos{\theta} &amp; 0 &amp; \sin{\theta} &amp; 0 \\
                0 &amp; 1 &amp;            0 &amp; 0 \\
    -\sin{\theta} &amp; 0 &amp; \cos{\theta} &amp; 0 \\
                0 &amp; 0 &amp;            0 &amp; 1
\end{matrix}\end{split}\]</div>
<p>and the JSON string for a rotation of 10 degrees (<span class="math notranslate nohighlight">\(\theta=0.175\)</span> radians) becomes</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;filters.transformation&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;matrix&quot;</span><span class="p">:</span><span class="s2">&quot;0.985  0  0.174  0  0  1  0  0  -0.174  0  0.985  0  0  0  0  1&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="filters.crop.html" class="btn btn-neutral float-right" title="filters.crop" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="filters.reprojection.html" class="btn btn-neutral float-left" title="filters.reprojection" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://hobu.co">
        <div class="hobu-logo"></div>
      </a>
      <div class="copyright">
      

                    &copy;  2023
                        <a href="https://github.com/abellgithub">Andrew Bell</a>,
                        <a href="https://github.com/chambbj">Brad Chambers</a>,
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>.

      
      Last updated on May 22, 2023.
      </div>
    </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <div class="footer">
        <div class="container">
                    &copy;  2023
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>,
                Last updated
                    on May 22, 2023.
        </div>
    </div>

</body>
</html>