
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>filters.lof &mdash; pdal.io</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/pdal.css" type="text/css" />
      <link rel="stylesheet" href="../_static/breathe.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://pdal.io/stages/filters.lof.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="filters.miniball" href="filters.miniball.html" />
    <link rel="prev" title="filters.estimaterank" href="filters.estimaterank.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
          </a>
              <div class="version">
                2.6.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apps/index.html">Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pipeline.html">Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="stages.html">Stages</a></li>
<li class="toctree-l1"><a class="reference internal" href="readers.html">Readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="writers.html">Writers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="filters.html">Filters</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="filters.html#create">Create</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="filters.html#classification">Classification</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.html#height-above-ground">Height Above Ground</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.html#colorization">Colorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.html#clustering">Clustering</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="filters.html#pointwise-features">Pointwise Features</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="filters.approximatecoplanar.html">filters.approximatecoplanar</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.covariancefeatures.html">filters.covariancefeatures</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.eigenvalues.html">filters.eigenvalues</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.estimaterank.html">filters.estimaterank</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">filters.lof</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.miniball.html">filters.miniball</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.nndistance.html">filters.nndistance</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.normal.html">filters.normal</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.optimalneighborhood.html">filters.optimalneighborhood</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.planefit.html">filters.planefit</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.radialdensity.html">filters.radialdensity</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.reciprocity.html">filters.reciprocity</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.zsmooth.html">filters.zsmooth</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="filters.html#assignment">Assignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.html#dimension-create-copy">Dimension Create/Copy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#order">Order</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#move">Move</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#cull">Cull</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#new">New</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#join">Join</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#metadata">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#mesh">Mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#languages">Languages</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html#other">Other</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dimensions.html">Dimensions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../types.html">Types</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../java.html">Java</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workshop/index.html">Workshop</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/index.html">Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html"> Documentation </a> &raquo;</li>
      
          <li><a href="filters.html">Filters</a> &raquo;</li>
      
      <li>filters.lof</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/PDAL/PDAL/edit//master/doc/stages/filters.lof.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="filters.miniball.html" class="btn btn-neutral float-right" title="filters.miniball" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="filters.estimaterank.html" class="btn btn-neutral float-left" title="filters.estimaterank" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="filters-lof">
<span id="id1"></span><h1>filters.lof<a class="headerlink" href="#filters-lof" title="Permalink to this heading"></a></h1>
<p>The <strong>Local Outlier Factor (LOF) filter</strong> was introduced as a method
of determining the degree to which an object is an outlier. This filter
is an implementation of the method
described in <a class="reference internal" href="../references.html#breunig2000" id="id2"><span>[Breunig2000]</span></a>.</p>
<p>The filter creates three new dimensions, <code class="docutils literal notranslate"><span class="pre">NNDistance</span></code>,
<code class="docutils literal notranslate"><span class="pre">LocalReachabilityDistance</span></code> and <code class="docutils literal notranslate"><span class="pre">LocalOutlierFactor</span></code>, all of which are
double-precision floating values. The <code class="docutils literal notranslate"><span class="pre">NNDistance</span></code> dimension records the
Euclidean distance between a point and it’s k-th nearest neighbor (the number
of k neighbors is set with the <a class="reference internal" href="#minpts">minpts</a> option). The
<code class="docutils literal notranslate"><span class="pre">LocalReachabilityDistance</span></code> is the inverse of the mean
of all reachability distances for a neighborhood of points. This reachability
distance is defined as the max of the Euclidean distance to a neighboring point
and that neighbor’s own previously computed <code class="docutils literal notranslate"><span class="pre">NNDistance</span></code>. Finally, each point
has a <code class="docutils literal notranslate"><span class="pre">LocalOutlierFactor</span></code> which is the mean of all
<code class="docutils literal notranslate"><span class="pre">LocalReachabilityDistance</span></code> values for the neighborhood. In each case, the
neighborhood is the set of k nearest neighbors.</p>
<p>In practice, setting the <a class="reference internal" href="#minpts">minpts</a> parameter appropriately and subsequently
filtering outliers based on the computed <code class="docutils literal notranslate"><span class="pre">LocalOutlierFactor</span></code> can be
difficult. The authors present some work on establishing upper and lower bounds
on LOF values, and provide some guidelines on selecting <a class="reference internal" href="#minpts">minpts</a> values, which
users of this filter should find instructive.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To inspect the newly created, non-standard dimensions, be sure to write to an
output format that can support arbitrary dimensions, such as BPF.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In earlier PDAL releases (up to v2.2.0), <code class="docutils literal notranslate"><span class="pre">NNDistance</span></code> was stored in the
<code class="docutils literal notranslate"><span class="pre">KDistance</span></code> Dimemsion.</p>
</div>
<div class="admonition embed" id="embed-0">
<p class="admonition-title">Default Embedded Stage </p>
<p>This stage is enabled by default</p>
</div>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this heading"></a></h2>
<p>The sample pipeline below computes the LOF with a neighborhood of 20 neighbors,
followed by a range filter to crop out points whose <code class="docutils literal notranslate"><span class="pre">LocalOutlierFactor</span></code>
exceeds 1.2 before writing the output.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;input.las&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;filters.lof&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;minpts&quot;</span><span class="p">:</span><span class="mi">20</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;filters.range&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;limits&quot;</span><span class="p">:</span><span class="s2">&quot;LocalOutlierFactor[:1.2]&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;output.laz&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this heading"></a></h2>
<dl class="simple">
<dt><span class="target" id="minpts">minpts</span></dt><dd><p>The number of k nearest neighbors. [Default: 10]</p>
</dd>
</dl>
<dl class="simple">
<dt>where</dt><dd><p>An <a class="reference internal" href="expression.html#pdal-expression"><span class="std std-ref">expression</span></a> that limits points passed to a filter.
Points that don’t pass the
expression skip the stage but are available to subsequent stages in a pipeline.
[Default: no filtering]</p>
</dd>
<dt>where_merge</dt><dd><p>A strategy for merging points skipped by a ‘<cite>where’</cite> option when running in standard mode.
If <code class="docutils literal notranslate"><span class="pre">true</span></code>, the skipped points are added to the first point view returned by the skipped
filter. If <code class="docutils literal notranslate"><span class="pre">false</span></code>, skipped points are placed in their own point view. If <code class="docutils literal notranslate"><span class="pre">auto</span></code>,
skipped points are merged into the returned point view provided that only one point view
is returned and it has the same point count as it did when the filter was run.
[Default: <code class="docutils literal notranslate"><span class="pre">auto</span></code>]</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="filters.miniball.html" class="btn btn-neutral float-right" title="filters.miniball" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="filters.estimaterank.html" class="btn btn-neutral float-left" title="filters.estimaterank" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://hobu.co">
        <div class="hobu-logo"></div>
      </a>
      <div class="copyright">
      

                    &copy;  2023
                        <a href="https://github.com/abellgithub">Andrew Bell</a>,
                        <a href="https://github.com/chambbj">Brad Chambers</a>,
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>.

      
      Last updated on May 22, 2023.
      </div>
    </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <div class="footer">
        <div class="container">
                    &copy;  2023
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>,
                Last updated
                    on May 22, 2023.
        </div>
    </div>

</body>
</html>