
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Metadata &mdash; pdal.io</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/pdal.css" type="text/css" />
      <link rel="stylesheet" href="../_static/breathe.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://pdal.io/development/metadata.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Writing with PDAL" href="writing.html" />
    <link rel="prev" title="Errors and Error Handling" href="errorhandling.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
          </a>
              <div class="version">
                2.6.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apps/index.html">Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pipeline.html">Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stages/stages.html">Stages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stages/readers.html">Readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stages/writers.html">Writers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stages/filters.html">Filters</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dimensions.html">Dimensions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../types.html">Types</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../java.html">Java</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workshop/index.html">Workshop</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">PDAL Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation/index.html">Compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="errorhandling.html">Errors and Error Handling</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Metadata</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#metadata-nodes">Metadata Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metadata-and-stages">Metadata and Stages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="writing.html">Writing with PDAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html">Writing and building a PDAL Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-filter.html">Writing a filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-kernel.html">Writing a kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-reader.html">Writing a reader</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-writer.html">Writing a writer</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmake.html">CMake</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../project/index.html">Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html"> Documentation </a> &raquo;</li>
      
          <li><a href="index.html">Development</a> &raquo;</li>
      
      <li>Metadata</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/PDAL/PDAL/edit//master/doc/development/metadata.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="writing.html" class="btn btn-neutral float-right" title="Writing with PDAL" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="errorhandling.html" class="btn btn-neutral float-left" title="Errors and Error Handling" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="metadata">
<span id="id1"></span><h1>Metadata<a class="headerlink" href="#metadata" title="Permalink to this heading"></a></h1>
<p>In addition to point data, PDAL stores metadata during the processing of
a pipeline.  Metadata is stored internally as strings, though the API
accepts a variety of types that are automatically converted as necessary.
Each item of metadata consists of a name, a description (optional), a value
and a type.  In addition, each item of metadata can have a list of child
metadata values.</p>
<p>Metadata is made available to users of PDAL through a JSON tree.  Commands
such as <a class="reference internal" href="../apps/pipeline.html#pipeline-command"><span class="std std-ref">pdal pipeline</span></a> and
<a class="reference internal" href="../apps/translate.html#translate-command"><span class="std std-ref">pdal translate</span></a> provide options to allow
the JSON-formatted metadata created by PDAL to be written to a file.</p>
<section id="metadata-nodes">
<h2>Metadata Nodes<a class="headerlink" href="#metadata-nodes" title="Permalink to this heading"></a></h2>
<p>Each item of metadata is stored in an object known as a <code class="docutils literal notranslate"><span class="pre">MetadataNode</span></code>.
Metadata nodes are reference types that can be copied cheaply.  Metadata nodes
are annotated with the original data type to allow better interpretation of
the data.
For example, when binary data is stored in a base 64-encoded
format, knowing that the data doesn’t ultimately represent a string can allow
algorithms to convert it back to its binary representation when desired.
Similarly, knowing that data is numeric allows it
to be written as a JSON numeric type rather than as a string.</p>
<p>The name of a metadata node is immutable.  If you wish to add a copy of
metadata (and subchildren) to some node using a different name, you need
to call the provided function “clone()”.</p>
<p>A metadata node is added as a child to another node using add().  Usually
the type of the data assigned to the metadata node is determined through
overloading, but there are instances where this is impossible and the
programmer must call a specific function to set the type of the metadata node.
Binary data that has been converted to a string by base 64 encoding can
be tagged as a such by calling addEncoded().  Programmers can specify the
type of a node explicitly by calling addWithType().  Currently supported
types are: “boolean”, “string”, “float”, “double”, “bounds”,
“nonNegativeInteger”, “integer”, “uuid” and “base64Binary”.</p>
<p>Metadata nodes can be presented as lists when transformed to JSON.  If
multiple nodes with the same name are added to a parent node, those
subnodes will automatically be tagged as list nodes and will be enclosed in
square brackets.  Single nodes can be forced to be treated as JSON lists
by calling addList() instead of add() on a parent node.</p>
</section>
<section id="metadata-and-stages">
<h2>Metadata and Stages<a class="headerlink" href="#metadata-and-stages" title="Permalink to this heading"></a></h2>
<p>Stages in PDAL each have a base metadata node.  You can retrieve a stage’s
metadata node by calling getMetadata().  When a PDAL pipeline is run, its
metadata is organized as a list of stage nodes to which subnodes have been
added.  From within the implementation of a stage, metadata is typically
added similarly to the following:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">MetadataNode</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getMetadata</span><span class="p">();</span>
<span class="n">root</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;nodename&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Some string data&quot;</span><span class="p">);</span>
<span class="n">root</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;intlist&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">45</span><span class="p">);</span>
<span class="n">root</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;intlist&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">55</span><span class="p">);</span>
<span class="n">Uuid</span><span class="w"> </span><span class="n">nullUuid</span><span class="p">;</span>
<span class="n">MetadataNode</span><span class="w"> </span><span class="n">pnode</span><span class="p">(</span><span class="s">&quot;parent&quot;</span><span class="p">);</span>
<span class="n">root</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">pnode</span><span class="p">);</span>
<span class="n">pnode</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;nulluuidnode&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">nullUuid</span><span class="p">);</span>
<span class="n">pnode</span><span class="p">.</span><span class="n">addList</span><span class="p">(</span><span class="s">&quot;num_in_list&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">66</span><span class="p">);</span>
</pre></div>
</div>
<p>If the above code was part of a stage “writers.test”, a transformation to JSON
would produce the following output:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;writers.test&quot;</span><span class="p">:</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;intlist&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="p">[</span>
<span class="w">      </span><span class="mi">45</span><span class="p">,</span>
<span class="w">      </span><span class="mi">55</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;nodename&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Some string data&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;parent&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;nulluuidnode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;num_in_list&quot;</span><span class="p">:</span>
<span class="w">      </span><span class="p">[</span>
<span class="w">        </span><span class="mi">66</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="writing.html" class="btn btn-neutral float-right" title="Writing with PDAL" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="errorhandling.html" class="btn btn-neutral float-left" title="Errors and Error Handling" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://hobu.co">
        <div class="hobu-logo"></div>
      </a>
      <div class="copyright">
      

                    &copy;  2023
                        <a href="https://github.com/abellgithub">Andrew Bell</a>,
                        <a href="https://github.com/chambbj">Brad Chambers</a>,
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>.

      
      Last updated on May 22, 2023.
      </div>
    </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <div class="footer">
        <div class="container">
                    &copy;  2023
                        <a href="http://github.com/hobu">Howard Butler</a>,
                        <a href="http://github.com/mpgerlek">Michael Gerlek</a>,
                        and
                        <a href="https://github.com/PDAL/PDAL/graphs/contributors">others</a>,
                Last updated
                    on May 22, 2023.
        </div>
    </div>

</body>
</html>